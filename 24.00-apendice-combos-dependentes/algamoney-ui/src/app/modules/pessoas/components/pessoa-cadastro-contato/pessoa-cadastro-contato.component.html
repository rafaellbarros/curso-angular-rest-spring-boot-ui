<div class="ui-g">
    <div class="ui-g-12">
        <button pButton label="Novo" icon="pi pi-plus" type="button"
            class="ui-button-secondary" (click)="prepararNovoContato()"></button>
    </div>
    <div class="ui-g-12">
      <p-table [value]="contatos" [responsive]="true">
        <ng-template pTemplate="header">
          <tr>
            <th>Nome</th>
            <th>E-mail</th>
            <th>Telefone</th>
            <th class="col-acoes-header"></th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-contato let-rowIndex="rowIndex">
          <tr>
            <td>{{ contato.nome }}</td>
            <td>{{ contato.email }}</td>
            <td>{{ contato.telefone }}</td>
            <td class="col-acoes">
              <a pButton icon="pi pi-pencil" pTooltip="Editar" tooltipPosition="top"
                style="width: 2em; margin-right: 3px;"
                class="ui-button-raised ui-button-info"
                (click)="prepararEdicaoContato(contato, rowIndex)"></a>
              <a pButton icon="pi pi-trash"  pTooltip="Excluir" tooltipPosition="top"
                style="width: 2em" class="ui-button-raised ui-button-danger"
                (click)="confirmarExclusao(rowIndex)"></a>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="4" class="text-center">
              Nenhum contato cadastrado
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

<p-dialog [header]="editando ? 'Edição Contato' : 'Novo Contato'" [(visible)]="exbindoFormularioContato"
  modal="modal" *ngIf="contato">
    <form #frmContato="ngForm" (ngSubmit)="confirmarContato(frmContato)">
        <div class="ui-g-12 ui-fluid">
          <label>Nome</label>

          <input pInputText type="text" name="nome"
            required [(ngModel)]="contato.nome" #contatoNome="ngModel"/>

          <message [control]="contatoNome" error="required"  severity="error" text="Informe o nome"></message>

        </div>

        <div class="ui-g-12 ui-fluid">
            <label>E-mail</label>

            <input pInputText type="email" name="email"
              required email [(ngModel)]="contato.email" #contatoEmail="ngModel"/>

            <message [control]="contatoEmail" error="required" severity="error" text="Informe o email"></message>
            <message [control]="contatoEmail" error="email" severity="error" text="Informe um e-mail válido"></message>
          </div>

          <div class="ui-g-12 ui-fluid">
              <label>Telefone</label>

              <p-inputMask name="telefone" [(ngModel)]="contato.telefone"
                mask="(99) 99999-999?9"></p-inputMask>
          </div>

          <div class="ui-g-12">
            <button pButton type="submit" label="Confirmar" [disabled]="frmContato.invalid"></button>
          </div>
    </form>
</p-dialog>
